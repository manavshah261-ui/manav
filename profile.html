<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Profile | Mental Health Support System</title>
<style>
  :root {
    --primary: #4cafef;
    --primary-dark: #388ecf;
    --bg: #f5f9ff;
    --text: #333;
    --card-bg: #fff;
    --error: #e74c3c;
  }

  body.dark {
    --bg: #121212;
    --text: #f5f5f5;
    --card-bg: #1e1e1e;
  }

  body {
    font-family: 'Segoe UI', sans-serif;
    background-color: var(--bg);
    color: var(--text);
    margin: 0;
    padding: 0;
    transition: background 0.3s, color 0.3s;
  }

  nav {
    background: var(--primary);
    padding: 0.8rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: white;
  }

  nav h1 { margin: 0; font-size: 1.3rem; }

  nav ul {
    list-style: none;
    display: flex;
    gap: 1rem;
    margin: 0;
    padding: 0;
  }

  nav a {
    text-decoration: none;
    color: white;
    font-weight: 500;
  }

  nav a:hover { text-decoration: underline; }

  .container {
    max-width: 650px;
    margin: 2rem auto;
    background: var(--card-bg);
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.1);
    text-align: center;
    transition: background 0.3s, color 0.3s, box-shadow 0.3s;
  }

  .profile-pic {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid var(--primary);
    margin-bottom: 1rem;
    cursor: pointer;
    transition: transform 0.3s ease, border-color 0.3s ease;
  }

  .profile-pic:hover {
    transform: scale(1.1);
    border-color: var(--primary-dark);
  }

  input[type="file"] { display: none; }

  input, textarea, button {
    width: 100%;
    padding: 0.7rem;
    margin: 0.6rem 0;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 1rem;
    box-sizing: border-box;
  }

  button, .dark-toggle {
    background: var(--primary);
    color: white;
    border: none;
    cursor: pointer;
    transition: transform 0.2s, background 0.2s;
  }

  button:hover, .dark-toggle:hover { transform: scale(1.05); background: var(--primary-dark); }

  .dark-toggle {
    margin-top: 1rem;
    display: inline-block;
    padding: 0.5rem 1rem;
    border-radius: 6px;
  }

  .preview {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.8s ease, transform 0.8s ease;
    margin-top: 1.5rem;
    text-align: left;
    border-top: 1px solid #ddd;
    padding-top: 1rem;
  }

  .preview.visible { opacity: 1; transform: translateY(0); }

  .error { color: var(--error); font-size: 0.9rem; text-align: left; margin-top: -0.5rem; }
  label { display: block; text-align: left; margin-top: 0.5rem; font-weight: 500; }
  #bioCounter { text-align: right; font-size: 0.85rem; color: #555; }

  @media (max-width: 480px) {
    nav ul { flex-direction: column; gap: 0.5rem; }
    .container { margin: 1rem; padding: 1rem; }
  }
</style>
</head>
<body>
<nav>
  <h1>Mental Health Support</h1>
  <ul>
    
   <a href="home.html" class="btn ghost" title="Back to Home">‚Üê Home</a>
  </ul>
</nav>
<div class="container">
  <img id="profileImage" class="profile-pic" src="https://via.placeholder.com/120" alt="Profile Picture">
  <input type="file" id="upload" accept="image/*">

  <label for="name">Full Name</label>
  <input type="text" id="name" placeholder="Enter your full name">
  <div id="nameError" class="error"></div>

  <label for="email">Email</label>
  <input type="email" id="email" placeholder="Enter your email">
  <div id="emailError" class="error"></div>

  <label for="phone">Phone Number (Optional)</label>
  <input type="tel" id="phone" placeholder="Enter your phone number">

  <label for="dob">Date of Birth (Optional)</label>
  <input type="date" id="dob">

  <label for="location">Location / City (Optional)</label>
  <input type="text" id="location" placeholder="Enter your city">

  <label for="occupation">Occupation (Optional)</label>
  <input type="text" id="occupation" placeholder="Enter your occupation">

  <label for="website">Website / LinkedIn (Optional)</label>
  <input type="url" id="website" placeholder="Enter website or LinkedIn URL">

  <label for="bio">Bio</label>
  <textarea id="bio" rows="3" placeholder="Write something about yourself..."></textarea>
  <div id="bioCounter">0 / 200</div>

  <div class="dark-toggle">üåô Dark Mode</div>
  <button onclick="resetProfile()" style="background:#e74c3c;">üóëÔ∏è Reset Profile</button>

  <div class="preview">
    <h3>Profile Preview:</h3>
    <p><strong>Name:</strong> <span id="previewName">-</span></p>
    <p><strong>Email:</strong> <span id="previewEmail">-</span></p>
    <p><strong>Phone:</strong> <span id="previewPhone">-</span></p>
    <p><strong>DOB:</strong> <span id="previewDOB">-</span></p>
    <p><strong>Location:</strong> <span id="previewLocation">-</span></p>
    <p><strong>Occupation:</strong> <span id="previewOccupation">-</span></p>
    <p><strong>Website:</strong> <span id="previewWebsite">-</span></p>
    <p><strong>Bio:</strong> <span id="previewBio">-</span></p>
    <p><strong>Mood:</strong> <span id="previewMood">üôÇ</span></p>
  </div>
</div>

<script>
const profileImage = document.getElementById('profileImage');
const upload = document.getElementById('upload');
const nameInput = document.getElementById('name');
const emailInput = document.getElementById('email');
const phoneInput = document.getElementById('phone');
const dobInput = document.getElementById('dob');
const locationInput = document.getElementById('location');
const occupationInput = document.getElementById('occupation');
const websiteInput = document.getElementById('website');
const bioInput = document.getElementById('bio');
const bioCounter = document.getElementById('bioCounter');
const darkToggle = document.querySelector('.dark-toggle');
const BIO_LIMIT = 200;
let bioTimeout;

const moodMap = [
  { keywords: ["happy","joy","glad","excited"], emoji: "üòÑ" },
  { keywords: ["sad","down","unhappy","depressed"], emoji: "üò¢" },
  { keywords: ["angry","mad","frustrated"], emoji: "üò†" },
  { keywords: ["love","affection","care"], emoji: "‚ù§Ô∏è" },
  { keywords: ["tired","sleepy","exhausted"], emoji: "üò¥" },
  { keywords: ["anxious","nervous","worried"], emoji: "üòü" }
];

// Load saved data
window.onload = () => {
  const fields = ['Name','Email','Phone','DOB','Location','Occupation','Website','Bio','Pic','DarkMode'];
  const ids = [nameInput,emailInput,phoneInput,dobInput,locationInput,occupationInput,websiteInput,bioInput,profileImage,darkToggle];
  fields.forEach((field,i)=>{
    const saved = localStorage.getItem('profile'+field);
    if(saved){
      if(ids[i].tagName==='INPUT' || ids[i].tagName==='TEXTAREA') ids[i].value = saved;
      else if(ids[i].id==='profileImage') profileImage.src = saved;
      else if(ids[i].id==='darkToggle' && saved==='enabled') document.body.classList.add('dark');
    }
  });
  bioCounter.textContent = `${bioInput.value.length} / ${BIO_LIMIT}`;
  animateBioTyping(bioInput.value);
  setTimeout(() => document.querySelector('.preview').classList.add('visible'), 200);
  updateMood();
};

// Profile picture upload
profileImage.addEventListener('click', () => upload.click());
upload.addEventListener('change', function(){
  const file = this.files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = e => {
      profileImage.src = e.target.result;
      localStorage.setItem('profilePic', e.target.result);
    };
    reader.readAsDataURL(file);
  }
});

// Auto-save & preview function
function autoSave(input, key, previewId){
  input.addEventListener('input', () => {
    localStorage.setItem(key, input.value);
    if(previewId) document.getElementById(previewId).textContent = input.value || '-';
    if(key==='profileBio') debounceBio();
    updateMood();
  });
}
autoSave(nameInput,'profileName','previewName');
autoSave(emailInput,'profileEmail','previewEmail');
autoSave(phoneInput,'profilePhone','previewPhone');
autoSave(dobInput,'profileDOB','previewDOB');
autoSave(locationInput,'profileLocation','previewLocation');
autoSave(occupationInput,'profileOccupation','previewOccupation');
autoSave(websiteInput,'profileWebsite','previewWebsite');
autoSave(bioInput,'profileBio','previewBio');

function debounceBio(){
  if(bioTimeout) clearTimeout(bioTimeout);
  bioTimeout = setTimeout(()=> animateBioTyping(bioInput.value),200);
}

// Bio typing animation
function animateBioTyping(text){
  const previewBio = document.getElementById('previewBio');
  previewBio.textContent = '';
  let i=0;
  function typeChar(){
    if(i<text.length){ previewBio.textContent += text.charAt(i); i++; setTimeout(typeChar,25); }
  }
  typeChar();
}

// Mood detection
function detectMood(text){
  text=text.toLowerCase();
  for(let mood of moodMap){
    for(let kw of mood.keywords){
      if(text.includes(kw)) return mood.emoji;
    }
  }
  return "üôÇ";
}

function updateMood(){
  document.getElementById('previewMood').textContent = detectMood(bioInput.value);
}

// Dark mode toggle
darkToggle.addEventListener('click', ()=>{
  document.body.classList.toggle('dark');
  const isDark = document.body.classList.contains('dark');
  localStorage.setItem('darkMode', isDark ? 'enabled' : 'disabled');
  darkToggle.textContent = isDark ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
  darkToggle.style.transform = 'scale(0.95)';
  setTimeout(()=>darkToggle.style.transform='scale(1)',150);
});

// Reset profile
function resetProfile(){
  if(confirm("‚ö†Ô∏è Are you sure you want to reset your profile?")){
    const keys=['profileName','profileEmail','profilePhone','profileDOB','profileLocation','profileOccupation','profileWebsite','profileBio','profilePic','darkMode'];
    keys.forEach(k=>localStorage.removeItem(k));
    nameInput.value=emailInput.value=phoneInput.value=dobInput.value=locationInput.value=occupationInput.value=websiteInput.value=bioInput.value='';
    profileImage.src='https://via.placeholder.com/120';
    bioCounter.textContent=`0 / ${BIO_LIMIT}`;
    document.querySelectorAll('.preview span').forEach(span=>span.textContent='-');
    alert("‚úÖ Profile has been reset!");
  }
}
</script>
</body>
</html>
